# Project Structure

This document explains the organized structure of the trading analysis project.

## 📁 Directory Layout

```
glowing-vibe/
├── src/                              # Python source code
│   ├── dynamic_stock_fetcher.py      # Multi-source stock discovery
│   ├── email_sender.py               # Email notification system
│   ├── multi_stock_mean_reversion.py # Original analysis (static stocks)
│   └── multi_stock_mean_reversion_dynamic.py # Enhanced analysis (dynamic stocks)
│
├── output/                           # Generated files and results
│   ├── top_buy_signals.csv          # Latest buy signals
│   ├── top_sell_signals.csv         # Latest sell signals
│   ├── top_stocks.json              # Cached stock list with metadata
│   ├── dynamic_multi_stock_signals.png # Analysis charts
│   ├── daily_report.md              # Formatted markdown report
│   └── *.png                        # Other generated charts
│
├── .github/workflows/                # GitHub Actions automation
│   └── daily_trading_analysis.yml   # Daily automation workflow
│
├── historical_analysis/              # Archived results (created by automation)
│   └── YYYYMMDD_HHMMSS/             # Timestamped historical data
│
├── .env                             # Local environment variables (not in git)
├── requirements.txt                 # Python dependencies
├── .gitignore                       # Git ignore patterns
├── README.md                        # Project overview
├── AUTOMATION_SETUP.md              # GitHub Actions setup guide
└── PROJECT_STRUCTURE.md             # This file
```

## 🐍 Source Code (`src/`)

### Core Analysis Scripts

- **`dynamic_stock_fetcher.py`**
  - Fetches stocks from multiple sources (S&P 500, NASDAQ 100, Most Active, Recent IPOs)
  - Calculates popularity scores based on market cap, volume, momentum
  - Saves ranked list to `output/top_stocks.json`
  - Can be run standalone: `python src/dynamic_stock_fetcher.py`

- **`multi_stock_mean_reversion_dynamic.py`**
  - Main analysis script using dynamic stock lists
  - Implements mean reversion strategies (Bollinger Bands, RSI, Z-Score)
  - Generates buy/sell signals with strength scoring
  - Creates visualizations and saves results to `output/`
  - Can be run standalone: `python src/multi_stock_mean_reversion_dynamic.py`

- **`email_sender.py`**
  - Sends HTML-formatted email reports
  - Includes CSV attachments and charts
  - Configurable via `.env` file or environment variables
  - Can be run standalone: `python src/email_sender.py`

- **`multi_stock_mean_reversion.py`**
  - Original analysis script with hardcoded stock list
  - Kept for reference and comparison
  - Legacy script, prefer using the dynamic version

### Usage Examples

```bash
# Fetch fresh stock list
python src/dynamic_stock_fetcher.py

# Run analysis (uses cached stocks or fetches if needed)
python src/multi_stock_mean_reversion_dynamic.py

# Force refresh stocks and run analysis
python src/multi_stock_mean_reversion_dynamic.py --refresh

# Send email report (requires analysis results in output/)
python src/email_sender.py
```

## 📊 Output Files (`output/`)

### Generated Analysis Files

- **`top_stocks.json`**
  - Ranked list of most popular stocks
  - Includes metadata: symbols, scores, sources, market metrics
  - Refreshed weekly (Mondays) or on demand

- **`top_buy_signals.csv`**
  - Top oversold opportunities
  - Columns: Symbol, Price, Signal_Strength, RSI, Z_Score, Price_Change_5d, etc.
  - Updated daily

- **`top_sell_signals.csv`**
  - Top overbought conditions
  - Same structure as buy signals
  - Updated daily

- **`dynamic_multi_stock_signals.png`**
  - Comprehensive analysis charts
  - 6-panel visualization showing signals, performance, and correlations
  - High-resolution (300 DPI) for presentations

- **`daily_report.md`**
  - Markdown-formatted summary report
  - Generated by GitHub Actions
  - Includes top signals in table format

### File Lifecycle

1. **Stock List**: Refreshed weekly (Mondays) or when missing
2. **Analysis Results**: Generated daily during market hours
3. **Charts**: Regenerated with each analysis
4. **Reports**: Created during automation runs
5. **Historical Archive**: Timestamped copies saved automatically

## 🤖 Automation (`.github/workflows/`)

### Daily Workflow

The `daily_trading_analysis.yml` workflow:

1. **Runs**: Monday-Friday at 6:30 AM UTC
2. **Stock Refresh**: Weekly on Mondays
3. **Analysis**: Daily mean reversion analysis
4. **Reporting**: Generates markdown reports
5. **Email**: Sends HTML reports with attachments
6. **Archiving**: Saves timestamped results
7. **Artifacts**: Uploads files for download

### Manual Triggers

- **Workflow Dispatch**: Manual trigger from GitHub Actions UI
- **Push Triggers**: Runs on code changes to `src/` files

## 🔧 Configuration

### Environment Variables

Create a `.env` file in the project root:

```bash
# Email Configuration
RECIPIENT_EMAIL=haowang228@gmail.com
SENDER_EMAIL=your_sending_email@gmail.com
EMAIL_APP_PASSWORD=your_gmail_app_password

# Legacy (not used but kept for compatibility)
ALPHA_VANTAGE_API_KEY=your_key_here
```

### GitHub Secrets

For automation, add these to repository secrets:

- `EMAIL_APP_PASSWORD`: Gmail app password
- `SENDER_EMAIL`: Sending Gmail address
- `RECIPIENT_EMAIL`: Recipient email address

## 📈 Historical Data

### Archive Structure

```
historical_analysis/
├── 20240616_063000/    # June 16, 2024 at 06:30:00 UTC
│   ├── top_buy_signals.csv
│   ├── top_sell_signals.csv
│   ├── dynamic_multi_stock_signals.png
│   └── daily_report.md
├── 20240617_063000/    # Next day's results
│   └── ...
└── ...
```

### Performance Tracking

- Compare signal strength over time
- Track success rates of buy/sell signals
- Monitor stock list evolution
- Analyze market condition impacts

## 🚀 Getting Started

### Local Development

1. **Clone repository**
2. **Install dependencies**: `pip install -r requirements.txt`
3. **Create `.env` file** with email configuration
4. **Run analysis**: `python src/multi_stock_mean_reversion_dynamic.py`
5. **Send test email**: `python src/email_sender.py`

### Production Setup

1. **Enable GitHub Actions** in repository settings
2. **Add repository secrets** for email configuration
3. **Trigger manual run** to test automation
4. **Monitor daily runs** in Actions tab

## 📝 Best Practices

### File Management

- **Source code** stays in `src/`
- **Generated files** go to `output/`
- **Configuration** in `.env` (local) or secrets (GitHub)
- **Documentation** in markdown files at root

### Development Workflow

1. **Edit code** in `src/` directory
2. **Test locally** with existing `output/` files
3. **Commit changes** and push to GitHub
4. **Monitor automation** in GitHub Actions

### Data Lifecycle

- **Real-time**: Latest results in `output/`
- **Historical**: Archived in `historical_analysis/`
- **Backup**: GitHub artifacts (30-day retention)
- **Email**: Daily delivery to configured recipients

This structure keeps the project organized, maintainable, and scalable for future enhancements! 🎯 